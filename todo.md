# Project TODO

- [x] アプリロゴの生成とブランディング設定
- [x] テーマカラーの設定（UV保護を連想させる紫系）
- [x] タブバーナビゲーションの設定（マップ、ルート、設定）
- [x] ホーム画面（マップ）の基本レイアウト
- [x] 現在地取得機能の実装
- [x] 地図表示の実装（react-native-maps）
- [x] UV指数カードの実装
- [x] UV指数に基づく肌への影響表示
- [x] 表示モード切替機能（標準/ヒートマップ/日陰）
- [x] UVヒートマップオーバーレイの実装
- [x] 日陰計算ロジックの実装（SunCalc使用）
- [x] 日陰ポリゴンの地図上描画
- [x] 時間スライダーによる影の変化表示
- [x] ルート検索画面の実装
- [x] 目的地入力機能
- [x] 日陰優先ルート計算ロジック
- [x] ルート表示と比較機能
- [x] 設定画面の実装
- [x] 肌タイプ選択機能

- [x] Apple Maps風ボトムシートUIの実装
- [x] スムーズなジェスチャー操作（ピンチズーム、パン）
- [x] 現在地ボタンの実装
- [x] 検索バーの実装
- [x] ルート表示のアニメーション
- [x] 高精度UV計算ロジックの改善

- [x] iOS/Android別デザインの実装

- [x] PLATEAU APIの調査と統合
- [x] PLATEAU建物データ取得サービスの実装
- [ ] 日本の気象庁UV指数データとの連携検討
- [ ] 日本語住所検索機能の実装


## v1.2 改善タスク

### UI改善
- [x] 開発者向けメッセージ（Expo Go案内）の削除
- [x] 座標表示などの技術情報を非表示に
- [x] ユーザー向けの直感的なUIに改善
- [x] 不要なデバッグ情報の削除

### 非機能要件
- [x] データキャッシュの実装（AsyncStorage）
- [x] エラーハンドリングの強化
- [x] ローディング状態の改善
- [x] パフォーマンス最適化（メモ化、遅延読み込み）


## v1.3 科学的根拠強化・機能拡張

### 学術研究調査
- [x] 日陰優先ルーティングに関する学術論文の調査
- [x] UV指数計算の科学的根拠の調査
- [x] 歩行者熱環境に関する研究の調査

### アルゴリズム改善
- [x] 研究に基づいた日陰ルーティングアルゴリズムの実装
- [x] UV指数計算の精度向上
- [x] 科学的根拠のドキュメント化

### 機能拡張
- [x] Web版地図表示の強化（OpenStreetMap統合）
- [x] オフライン対応の実装
- [-] ウィジェット機能の実装（スキップ）

## v1.4 バックエンド強化

### API統合
- [x] Open-Meteo APIの統合（UV指数データ）
- [x] ジオコーディングAPI統合（日本語住所検索）

### データベース
- [x] お気に入り場所のスキーマ定義
- [x] 検索履歴のスキーマ定義
- [x] UVデータキャッシュのスキーマ定義

### APIエンドポイント
- [x] UVデータ取得API
- [x] 住所検索API
- [x] お気に入り管理API
- [x] 履歴管理API

### フロントエンド統合
- [x] 検索バーとバックエンドAPIの統合
- [x] tRPC React Queryフックの実装

### プッシュ通知
- [-] 高UV警告通知の実装（スキップ）
- [-] 日陰リマインダー通知の実装（スキップ）
- [-] 通知スケジューラーの実装（スキップ）

### テスト
- [x] 全テストの実行（73テストパス）
- [x] プロジェクト状態の確認


## v1.5 位置情報処理の改善

- [x] 位置情報フックの改善（初回許可リクエスト、デフォルト位置）
- [x] メイン画面の位置情報エラーハンドリング改善
- [x] ユーザーフレンドリーなエラーメッセージ表示


## v1.6 機能動作確認と視認性改善

### マップ視認性
- [ ] 現在地の地名表示（例：「東京駅」）
- [ ] 座標表示の追加
- [ ] マップのズームレベル調整
- [ ] 地図の見やすさ改善

### 機能動作確認
- [ ] 検索機能の実際の動作確認
- [ ] ルート検索機能の実際の動作確認
- [ ] 設定の保存・読み込み確認
- [ ] UV指数の実データ取得確認

## v1.7 UV指数実データ取得

- [x] UV指数が0.0になっている原因の調査（CORSエラー、tRPC形式不一致）
- [x] Open-Meteo APIからの実データ取得確認（UV指数 0.9）
- [x] フロントエンドでの実データ表示修正（tRPC superjson形式対応、データ変換処理）

## v1.8 地図視認性向上

- [x] リバースジオコーディング機能の実装（Nominatim API使用）
- [x] 現在地の地名表示（例：「千代田区」）
- [x] 座標表示の追加（緯度・経度、小数点4桁）
- [x] 地名・座標表示UIコンポーネントの作成（LocationInfoCard）
- [x] マップ上での表示位置の調整（検索バーの下、中央揃え）

## v1.9 ルート検索機能の実装

- [x] 既存のルート画面コードの確認
- [x] ルート検索API（OSRM）の統合
- [x] 出発地・目的地入力UI（現在地自動設定、目的地入力）
- [x] 日陰優先ルートアルゴリズムの実装（建物影計算、日陰率分析）
- [x] ルート詳細情報の表示（距離、時間、日陰率、UV露出）
- [ ] ルートを地図上に描画（将来の機能向上）
- [ ] 複数ルートの比較表示（将来の機能向上）
